# AWS Application Migration Service (MGN) ‚Äî Step-by-Step Practical Guide

## üìò Overview

**AWS Application Migration Service (MGN)** helps you **migrate on-premises servers** (physical or virtual) to **AWS EC2** by **automatically replicating** your source servers to AWS, and then launching test or cutover instances with minimal downtime.

MGN is the recommended service for **lift-and-shift (rehost)** migrations.

---

## üß© Prerequisites

Before beginning, ensure:

* Access to AWS Management Console
* Admin privileges on **on-premises servers**
* Outbound internet access (for agent ‚Üí AWS replication)
* IAM user with correct permissions

---

## üë§ Step 1: Create IAM User and Permissions

### Navigate:

**AWS Console ‚Üí IAM ‚Üí Users ‚Üí Create User**

### Details:

* **User name:** `MGNuser-sourav`
* **Access type:** ‚úÖ Programmatic access (for agent installation)

### Attach Permissions:

Attach the following policies:

1. `AWSApplicationMigrationAgentPolicy` *(Mandatory for agent authentication)*
2. `AWSApplicationMigrationReplicationServerPolicy`
3. `AWSApplicationMigrationConversionServerPolicy`
4. `AWSApplicationMigrationServiceRolePolicy`
5. *(Optional for monitoring)* `CloudWatchFullAccess`
6. *(Optional for management)* `AmazonSSMManagedInstanceCore`

### Final Step:

* Click **Create user**
* Under **Security credentials ‚Üí Create access key**
* Save the **Access Key ID** and **Secret Access Key** (used during agent installation)

---

## ‚öôÔ∏è Step 2: Configure Application Migration Service Settings

### Navigate:

**AWS Console ‚Üí Application Migration Service ‚Üí Settings**

Here you configure **global migration settings**:

1. **Replication Settings Template**

   * Default subnet for replication servers
   * Replication server instance type
   * Data encryption (KMS key)
   * Staging area tags (optional)
2. Click **Edit**, modify settings as per requirement, then **Save Changes**

üß† *Tip:* The staging area is an AWS-managed environment where continuous data replication happens before launch.

---

## üß∞ Step 3: Install AWS Replication Agent on On-Premises Servers

The **Replication Agent** is installed on each source (on-prem) server you want to migrate.

### Step 3.1 ‚Äî Get Installation Command

1. Go to **Application Migration Service ‚Üí Source Servers**
2. Click **Add servers**
3. You‚Äôll see the **Installation command** displayed, something like:

#### ü™ü For Windows:

```powershell
powershell.exe -ExecutionPolicy Bypass -File .\aws-replication-installer-init.ps1 -r us-east-1 -a <ACCESS_KEY> -s <SECRET_KEY>
```

#### üêß For Linux:

```bash
wget -O aws-replication-installer-init.py https://aws-application-migration-service.s3.amazonaws.com/latest/linux/aws-replication-installer-init.py
sudo python3 aws-replication-installer-init.py --region us-east-1 --aws-access-key-id <ACCESS_KEY> --aws-secret-access-key <SECRET_KEY>
```

> Replace `<ACCESS_KEY>`, `<SECRET_KEY>`, and `us-east-1` with your actual IAM credentials and region.

### Step 3.2 ‚Äî Verify Agent Connection

* After installation, return to **Source Servers** page.
* The servers will appear automatically under **Discovered Source Servers** once they start replicating.

Status should show:

> **Connected ‚Üí Replicating**

---

## üñ•Ô∏è Step 4: Explore and Manage Source Servers

Navigate to:
**Application Migration Service ‚Üí Source Servers**

Here you can:

* View all replicated servers
* Check their replication status, lag time, disk volume size, etc.

Click on any **server name** to open its details:

* **Replication settings**
* **Launch settings**
* **Network mapping**
* **EC2 instance configuration**

---

## ‚öôÔ∏è Step 5: Configure Launch Settings

For each source server:

1. Select a server ‚Üí click **Launch settings ‚Üí Edit**
2. Modify settings:

   * **Instance type** (e.g., `t3.large`, `m5.large`)
   * **Subnet and VPC**
   * **Security groups**
   * **Private IP / Elastic IP**
   * **IAM role for target instance**
   * **User data scripts** (optional startup scripts)
3. Click **Save changes**

üß† *Tip:* These launch settings define how your migrated EC2 instance will be created during test or cutover.

---

## üß© Step 6: Test Launch

Once replication status shows **Healthy**, perform a **Test Launch**:

1. In **Source Servers**, select all (or individual) servers.
2. Click **Launch test instances**.

AWS MGN will:

* Create EC2 instances from the replicated data.
* Boot them in AWS for validation.

Check status under:

> **Job history ‚Üí Test launch job ‚Üí Status: Completed**

### Validate the Test:

* Verify application and connectivity inside the launched EC2 instance.
* Confirm performance, networking, and data consistency.

After validation:

* Mark test as **Successful** under server actions.

---

## üöÄ Step 7: Cutover Launch (Final Migration)

After successful testing:

1. Select servers again in **Source Servers** tab.
2. Click **Launch cutover instances**.
3. Once the instances launch successfully, you can:

   * Stop replication.
   * Decommission on-prem servers.

Status changes to:

> **Cutover complete**

---

## ‚úÖ Summary

| Step | Action                             | Purpose                                       |
| ---- | ---------------------------------- | --------------------------------------------- |
| 1    | Create IAM User (`MGNuser-sourav`) | Allow agent to replicate servers              |
| 2    | Edit Migration Service Settings    | Define default replication environment        |
| 3    | Install Replication Agent          | Enable continuous data replication            |
| 4    | Explore Source Servers             | View and manage discovered servers            |
| 5    | Configure Launch Settings          | Define EC2 configuration for migrated servers |
| 6    | Launch Test Instances              | Validate migration accuracy                   |
| 7    | Launch Cutover Instances           | Perform final production migration            |

---

## üß† Additional Tips

* Ensure **replication traffic** (TCP 443) is open outbound from your on-prem servers to AWS.
* Always perform **test launch before cutover**.
* You can **tag** servers to group migration waves (useful for large migrations).
* Use **AWS CloudWatch** for replication health monitoring.

